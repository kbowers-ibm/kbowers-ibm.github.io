"use strict";
self["webpackHotUpdate_kie_tools_bpmn_editor"]("misc-empty-Empty-stories",{

/***/ "./src/BpmnEditor.tsx":
/*!****************************!*\
  !*** ./src/BpmnEditor.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BpmnEditor: () => (/* binding */ BpmnEditor),
/* harmony export */   BpmnEditorInternal: () => (/* binding */ BpmnEditorInternal)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ "../../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");
/* harmony import */ var _patternfly_react_core_dist_styles_base_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @patternfly/react-core/dist/styles/base.css */ "../../node_modules/.pnpm/@patternfly+react-core@4.276.6_react-dom@17.0.2_react@17.0.2__react@17.0.2/node_modules/@patternfly/react-core/dist/styles/base.css");
/* harmony import */ var reactflow_dist_style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! reactflow/dist/style.css */ "../../node_modules/.pnpm/reactflow@11.10.1_@types+react@17.0.21_immer@10.0.3_patch_hash=utu5oov26wz5mjuays57tp3ybu__re_jarraoawze25g6tc5b4lcviyam/node_modules/reactflow/dist/style.css");
/* harmony import */ var _patternfly_react_core_dist_js_components_Drawer__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @patternfly/react-core/dist/js/components/Drawer */ "../../node_modules/.pnpm/@patternfly+react-core@4.276.6_react-dom@17.0.2_react@17.0.2__react@17.0.2/node_modules/@patternfly/react-core/dist/js/components/Drawer/index.js");
/* harmony import */ var _patternfly_react_core_dist_js_components_Drawer__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_patternfly_react_core_dist_js_components_Drawer__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! immer */ "../../node_modules/.pnpm/immer@10.0.3_patch_hash=utu5oov26wz5mjuays57tp3ybu/node_modules/immer/dist/immer.mjs");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-dom */ "../../node_modules/.pnpm/react-dom@17.0.2_react@17.0.2/node_modules/react-dom/index.js");
/* harmony import */ var react_error_boundary__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! react-error-boundary */ "../../node_modules/.pnpm/react-error-boundary@4.0.12_react@17.0.2/node_modules/react-error-boundary/dist/react-error-boundary.development.esm.js");
/* harmony import */ var reactflow__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! reactflow */ "../../node_modules/.pnpm/@reactflow+core@11.10.1_@types+react@17.0.21_immer@10.0.3_patch_hash=utu5oov26wz5mjuays57tp3y_kvkkldyzgoymrhkgoz2ul5eloq/node_modules/@reactflow/core/dist/esm/index.mjs");
/* harmony import */ var _BpmnEditorContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./BpmnEditorContext */ "./src/BpmnEditorContext.tsx");
/* harmony import */ var _BpmnEditorErrorFallback__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./BpmnEditorErrorFallback */ "./src/BpmnEditorErrorFallback.tsx");
/* harmony import */ var _diagram_BpmnDiagram__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./diagram/BpmnDiagram */ "./src/diagram/BpmnDiagram.tsx");
/* harmony import */ var _diagram_BpmnVersionLabel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./diagram/BpmnVersionLabel */ "./src/diagram/BpmnVersionLabel.tsx");
/* harmony import */ var _externalModels_BpmnEditorExternalModelsContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./externalModels/BpmnEditorExternalModelsContext */ "./src/externalModels/BpmnEditorExternalModelsContext.tsx");
/* harmony import */ var _normalization_normalize__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./normalization/normalize */ "./src/normalization/normalize.ts");
/* harmony import */ var _store_initialComputedCache__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./store/initialComputedCache */ "./src/store/initialComputedCache.ts");
/* harmony import */ var _kie_tools_xyflow_react_kie_diagram_dist_store_ComputedStateCache__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @kie-tools/xyflow-react-kie-diagram/dist/store/ComputedStateCache */ "../xyflow-react-kie-diagram/dist/store/ComputedStateCache.js");
/* harmony import */ var _kie_tools_xyflow_react_kie_diagram_dist_store_Store__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @kie-tools/xyflow-react-kie-diagram/dist/store/Store */ "../xyflow-react-kie-diagram/dist/store/Store.js");
/* harmony import */ var _store_Store__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./store/Store */ "./src/store/Store.ts");
/* harmony import */ var _store_StoreContext__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./store/StoreContext */ "./src/store/StoreContext.ts");
/* harmony import */ var _svg_BpmnDiagramSvg__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./svg/BpmnDiagramSvg */ "./src/svg/BpmnDiagramSvg.tsx");
/* harmony import */ var _kie_tools_xyflow_react_kie_diagram_dist_reactExt_useStateAsItWasBeforeConditionBecameTrue__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @kie-tools/xyflow-react-kie-diagram/dist/reactExt/useStateAsItWasBeforeConditionBecameTrue */ "../xyflow-react-kie-diagram/dist/reactExt/useStateAsItWasBeforeConditionBecameTrue.js");
/* harmony import */ var _kie_tools_xyflow_react_kie_diagram_dist_reactExt_useEffectAfterFirstRender__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @kie-tools/xyflow-react-kie-diagram/dist/reactExt/useEffectAfterFirstRender */ "../xyflow-react-kie-diagram/dist/reactExt/useEffectAfterFirstRender.js");
/* harmony import */ var _commands_CommandsContextProvider__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./commands/CommandsContextProvider */ "./src/commands/CommandsContextProvider.tsx");
/* harmony import */ var _propertiesPanel_PropertiesPanel__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./propertiesPanel/PropertiesPanel */ "./src/propertiesPanel/PropertiesPanel.tsx");
/* harmony import */ var _kie_tools_xyflow_react_kie_diagram_dist_patternfly_customizations_css__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @kie-tools/xyflow-react-kie-diagram/dist/patternfly-customizations.css */ "../xyflow-react-kie-diagram/dist/patternfly-customizations.css");
/* harmony import */ var _kie_tools_xyflow_react_kie_diagram_dist_xyflow_customizations_css__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @kie-tools/xyflow-react-kie-diagram/dist/xyflow-customizations.css */ "../xyflow-react-kie-diagram/dist/xyflow-customizations.css");
/* harmony import */ var _BpmnEditor_css__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./BpmnEditor.css */ "./src/BpmnEditor.css");





























const ON_MODEL_CHANGE_DEBOUNCE_TIME_IN_MS = 500;
const SVG_PADDING = 20;
const BpmnEditorInternal = _ref => {
  let {
    model,
    originalVersion,
    onModelChange,
    onModelDebounceStateChanged,
    forwardRef
  } = _ref;
  const isPropertiesPanelOpen = (0,_store_StoreContext__WEBPACK_IMPORTED_MODULE_14__.useBpmnEditorStore)(s => s.propertiesPanel.isOpen);
  const bpmn = (0,_store_StoreContext__WEBPACK_IMPORTED_MODULE_14__.useBpmnEditorStore)(s => s.bpmn);
  const isDiagramEditingInProgress = (0,_store_StoreContext__WEBPACK_IMPORTED_MODULE_14__.useBpmnEditorStore)(s => s.computed(s).isDiagramEditingInProgress());
  const bpmnEditorStoreApi = (0,_store_StoreContext__WEBPACK_IMPORTED_MODULE_14__.useBpmnEditorStoreApi)();
  const {
    commandsRef
  } = (0,_commands_CommandsContextProvider__WEBPACK_IMPORTED_MODULE_18__.useCommands)();
  const {
    bpmnModelBeforeEditingRef,
    bpmnEditorRootElementRef
  } = (0,_BpmnEditorContext__WEBPACK_IMPORTED_MODULE_5__.useBpmnEditor)();
  const diagramRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);
  const diagramContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);
  (0,react__WEBPACK_IMPORTED_MODULE_3__.useImperativeHandle)(forwardRef, () => ({
    reset: model => {
      const state = bpmnEditorStoreApi.getState();
      return state.dispatch(state).reset((0,_normalization_normalize__WEBPACK_IMPORTED_MODULE_10__.normalize)(model));
    },
    getDiagramSvg: async () => {
      var _a, _b, _c, _d;
      const nodes = (_b = (_a = diagramRef.current) === null || _a === void 0 ? void 0 : _a.getReactFlowInstance()) === null || _b === void 0 ? void 0 : _b.getNodes();
      const edges = (_d = (_c = diagramRef.current) === null || _c === void 0 ? void 0 : _c.getReactFlowInstance()) === null || _d === void 0 ? void 0 : _d.getEdges();
      if (!nodes || !edges) {
        return undefined;
      }
      const bounds = reactflow__WEBPACK_IMPORTED_MODULE_23__.getNodesBounds(nodes);
      const state = bpmnEditorStoreApi.getState();
      const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      svg.setAttribute("width", bounds.width + SVG_PADDING * 2 + "");
      svg.setAttribute("height", bounds.height + SVG_PADDING * 5 + "");
      react_dom__WEBPACK_IMPORTED_MODULE_4__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g", {
        transform: `translate(${-bounds.x + SVG_PADDING} ${-bounds.y + SVG_PADDING})`,
        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_svg_BpmnDiagramSvg__WEBPACK_IMPORTED_MODULE_15__.BpmnDiagramSvg, {
          nodes: nodes,
          edges: edges,
          snapGrid: state.xyFlowReactKieDiagram.snapGrid
        })
      }), svg);
      return new XMLSerializer().serializeToString(svg);
    },
    getCommands: () => commandsRef.current
  }), [bpmnEditorStoreApi, commandsRef]);
  (0,_kie_tools_xyflow_react_kie_diagram_dist_reactExt_useEffectAfterFirstRender__WEBPACK_IMPORTED_MODULE_17__.useEffectAfterFirstRender)(() => {
    bpmnEditorStoreApi.setState(state => {
      if (model === (0,immer__WEBPACK_IMPORTED_MODULE_24__.original)(state.bpmn.model)) {
        return;
      }
      state.bpmn.model = (0,_normalization_normalize__WEBPACK_IMPORTED_MODULE_10__.normalize)(model);
      bpmnModelBeforeEditingRef.current = state.bpmn.model;
    });
  }, [bpmnEditorStoreApi, model]);
  (0,_kie_tools_xyflow_react_kie_diagram_dist_reactExt_useStateAsItWasBeforeConditionBecameTrue__WEBPACK_IMPORTED_MODULE_16__.useStateAsItWasBeforeConditionBecameTrue)(bpmn.model, isDiagramEditingInProgress, (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(prev => bpmnModelBeforeEditingRef.current = prev, [bpmnModelBeforeEditingRef]));
  (0,_kie_tools_xyflow_react_kie_diagram_dist_reactExt_useEffectAfterFirstRender__WEBPACK_IMPORTED_MODULE_17__.useEffectAfterFirstRender)(() => {
    if (isDiagramEditingInProgress) {
      return;
    }
    onModelDebounceStateChanged === null || onModelDebounceStateChanged === void 0 ? void 0 : onModelDebounceStateChanged(false);
    const timeout = setTimeout(() => {
      if (model === bpmn.model) {
        return;
      }
      onModelDebounceStateChanged === null || onModelDebounceStateChanged === void 0 ? void 0 : onModelDebounceStateChanged(true);
      console.debug("BPMN EDITOR: Model changed!");
      onModelChange === null || onModelChange === void 0 ? void 0 : onModelChange(bpmn.model);
    }, ON_MODEL_CHANGE_DEBOUNCE_TIME_IN_MS);
    return () => {
      clearTimeout(timeout);
    };
  }, [isDiagramEditingInProgress, onModelChange, bpmn.model]);
  const propertiesPanel = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_propertiesPanel_PropertiesPanel__WEBPACK_IMPORTED_MODULE_19__.PropertiesPanel, {}), []);
  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
    ref: bpmnEditorRootElementRef,
    className: "kie-bpmn-editor--root",
    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_patternfly_react_core_dist_js_components_Drawer__WEBPACK_IMPORTED_MODULE_25__.Drawer, {
      isExpanded: isPropertiesPanelOpen,
      isInline: true,
      position: "right",
      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_patternfly_react_core_dist_js_components_Drawer__WEBPACK_IMPORTED_MODULE_25__.DrawerContent, {
        panelContent: propertiesPanel,
        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_patternfly_react_core_dist_js_components_Drawer__WEBPACK_IMPORTED_MODULE_25__.DrawerContentBody, {
          children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: "kie-bpmn-editor--diagram-container",
            ref: diagramContainerRef,
            "data-testid": "kie-bpmn-editor--diagram-container",
            children: [originalVersion && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_diagram_BpmnVersionLabel__WEBPACK_IMPORTED_MODULE_8__.BpmnVersionLabel, {
              version: originalVersion
            }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_diagram_BpmnDiagram__WEBPACK_IMPORTED_MODULE_7__.BpmnDiagram, {
              diagramRef: diagramRef,
              container: diagramContainerRef
            })]
          })
        })
      })
    })
  });
};
const BpmnEditor = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.forwardRef((props, ref) => {
  const store = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => (0,_store_Store__WEBPACK_IMPORTED_MODULE_13__.createBpmnEditorStore)(props.model, new _kie_tools_xyflow_react_kie_diagram_dist_store_ComputedStateCache__WEBPACK_IMPORTED_MODULE_26__.ComputedStateCache(_store_initialComputedCache__WEBPACK_IMPORTED_MODULE_11__.INITIAL_COMPUTED_CACHE)), []);
  const storeRef = react__WEBPACK_IMPORTED_MODULE_3__.useRef(store);
  const resetState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(_ref2 => {
    let {
      args
    } = _ref2;
    var _a;
    (_a = storeRef.current) === null || _a === void 0 ? void 0 : _a.setState(state => {
      state.diagram = (0,_store_Store__WEBPACK_IMPORTED_MODULE_13__.getDefaultStaticState)().diagram;
      state.bpmn.model = args[0];
    });
  }, []);
  return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_BpmnEditorContext__WEBPACK_IMPORTED_MODULE_5__.BpmnEditorContextProvider, {
    ...props,
    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_error_boundary__WEBPACK_IMPORTED_MODULE_27__.ErrorBoundary, {
      FallbackComponent: _BpmnEditorErrorFallback__WEBPACK_IMPORTED_MODULE_6__.BpmnEditorErrorFallback,
      onReset: resetState,
      children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_externalModels_BpmnEditorExternalModelsContext__WEBPACK_IMPORTED_MODULE_9__.BpmnEditorExternalModelsContextProvider, {
        ...props,
        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_store_StoreContext__WEBPACK_IMPORTED_MODULE_14__.BpmnEditorStoreApiContext.Provider, {
          value: storeRef.current,
          children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_kie_tools_xyflow_react_kie_diagram_dist_store_Store__WEBPACK_IMPORTED_MODULE_12__.XyFlowReactKieDiagramStoreApiContext.Provider, {
            value: storeRef.current,
            children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_commands_CommandsContextProvider__WEBPACK_IMPORTED_MODULE_18__.CommandsContextProvider, {
              children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BpmnEditorInternal, {
                forwardRef: ref,
                ...props
              })
            })
          })
        })
      })
    })
  });
});
try {
    // @ts-ignore
    BpmnEditorInternal.displayName = "BpmnEditorInternal";
    // @ts-ignore
    BpmnEditorInternal.__docgenInfo = { "description": "", "displayName": "BpmnEditorInternal", "props": { "model": { "defaultValue": null, "description": "The BPMN itself.", "name": "model", "required": true, "type": { "name": "BpmnLatestModel" } }, "originalVersion": { "defaultValue": null, "description": "The original version of `model` before upgrading to `latest`.", "name": "originalVersion", "required": false, "type": { "name": "enum", "value": [{ "value": "\"2.0\"" }] } }, "onModelChange": { "defaultValue": null, "description": "Called when a change occurs on `model`, so the controlled flow of the component can be done.", "name": "onModelChange", "required": false, "type": { "name": "OnBpmnModelChange" } }, "externalContextName": { "defaultValue": null, "description": "The name of context in which this instance of BPMN Editor is running. For example, if this BPMN Editor instance\nis displaying a model from a project called \"My project\", you could use `externalContextName={\"My project\"}`", "name": "externalContextName", "required": false, "type": { "name": "string" } }, "externalContextDescription": { "defaultValue": null, "description": "Describe the context in which this instance of BPMN Editor is running. For example, if this BPMN Editor instance\nis displaying a model from a project called \"My project\", you could use\n`externalContextDescription={'All models (DMN, etc) of \"My project\" are available.'}`", "name": "externalContextDescription", "required": false, "type": { "name": "string" } }, "issueTrackerHref": { "defaultValue": null, "description": "A link that will take users to an issue tracker so they can report problems they find on the BPMN Editor.\nThis is shown on the ErrorBoundary fallback component, when an uncaught error happens.", "name": "issueTrackerHref", "required": false, "type": { "name": "string" } }, "onRequestToJumpToPath": { "defaultValue": null, "description": "When users want to jump to another file, this method is called, allowing the controller of this component decide what to do.\nLinks are only rendered if this is provided. Otherwise, paths will be rendered as text.", "name": "onRequestToJumpToPath", "required": false, "type": { "name": "OnRequestToJumpToPath" } }, "onRequestToResolvePath": { "defaultValue": null, "description": "All paths inside the BPMN Editor are relative. To be able to resolve them and display them as absolute paths, this function is called.\nIf undefined, the relative paths will be displayed.", "name": "onRequestToResolvePath", "required": false, "type": { "name": "OnRequestToResolvePath" } }, "onModelDebounceStateChanged": { "defaultValue": null, "description": "Notifies the caller when the BPMN Editor performs a new edit after the debounce time.", "name": "onModelDebounceStateChanged", "required": false, "type": { "name": "((changed: boolean) => void)" } }, "forwardRef": { "defaultValue": null, "description": "", "name": "forwardRef", "required": false, "type": { "name": "Ref<BpmnEditorRef>" } } } };
    // @ts-ignore
    if (typeof STORYBOOK_REACT_CLASSES !== "undefined")
        // @ts-ignore
        STORYBOOK_REACT_CLASSES["src/BpmnEditor.tsx#BpmnEditorInternal"] = { docgenInfo: BpmnEditorInternal.__docgenInfo, name: "BpmnEditorInternal", path: "src/BpmnEditor.tsx#BpmnEditorInternal" };
}
catch (__react_docgen_typescript_loader_error) { }
try {
    // @ts-ignore
    BpmnEditor.displayName = "BpmnEditor";
    // @ts-ignore
    BpmnEditor.__docgenInfo = { "description": "", "displayName": "BpmnEditor", "props": { "model": { "defaultValue": null, "description": "The BPMN itself.", "name": "model", "required": true, "type": { "name": "BpmnLatestModel" } }, "originalVersion": { "defaultValue": null, "description": "The original version of `model` before upgrading to `latest`.", "name": "originalVersion", "required": false, "type": { "name": "enum", "value": [{ "value": "\"2.0\"" }] } }, "onModelChange": { "defaultValue": null, "description": "Called when a change occurs on `model`, so the controlled flow of the component can be done.", "name": "onModelChange", "required": false, "type": { "name": "OnBpmnModelChange" } }, "externalContextName": { "defaultValue": null, "description": "The name of context in which this instance of BPMN Editor is running. For example, if this BPMN Editor instance\nis displaying a model from a project called \"My project\", you could use `externalContextName={\"My project\"}`", "name": "externalContextName", "required": false, "type": { "name": "string" } }, "externalContextDescription": { "defaultValue": null, "description": "Describe the context in which this instance of BPMN Editor is running. For example, if this BPMN Editor instance\nis displaying a model from a project called \"My project\", you could use\n`externalContextDescription={'All models (DMN, etc) of \"My project\" are available.'}`", "name": "externalContextDescription", "required": false, "type": { "name": "string" } }, "issueTrackerHref": { "defaultValue": null, "description": "A link that will take users to an issue tracker so they can report problems they find on the BPMN Editor.\nThis is shown on the ErrorBoundary fallback component, when an uncaught error happens.", "name": "issueTrackerHref", "required": false, "type": { "name": "string" } }, "onRequestToJumpToPath": { "defaultValue": null, "description": "When users want to jump to another file, this method is called, allowing the controller of this component decide what to do.\nLinks are only rendered if this is provided. Otherwise, paths will be rendered as text.", "name": "onRequestToJumpToPath", "required": false, "type": { "name": "OnRequestToJumpToPath" } }, "onRequestToResolvePath": { "defaultValue": null, "description": "All paths inside the BPMN Editor are relative. To be able to resolve them and display them as absolute paths, this function is called.\nIf undefined, the relative paths will be displayed.", "name": "onRequestToResolvePath", "required": false, "type": { "name": "OnRequestToResolvePath" } }, "onModelDebounceStateChanged": { "defaultValue": null, "description": "Notifies the caller when the BPMN Editor performs a new edit after the debounce time.", "name": "onModelDebounceStateChanged", "required": false, "type": { "name": "((changed: boolean) => void)" } } } };
    // @ts-ignore
    if (typeof STORYBOOK_REACT_CLASSES !== "undefined")
        // @ts-ignore
        STORYBOOK_REACT_CLASSES["src/BpmnEditor.tsx#BpmnEditor"] = { docgenInfo: BpmnEditor.__docgenInfo, name: "BpmnEditor", path: "src/BpmnEditor.tsx#BpmnEditor" };
}
catch (__react_docgen_typescript_loader_error) { }

/***/ }),

/***/ "./src/store/StoreContext.ts":
/*!***********************************!*\
  !*** ./src/store/StoreContext.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BpmnEditorStoreApiContext: () => (/* binding */ BpmnEditorStoreApiContext),
/* harmony export */   useBpmnEditorStore: () => (/* binding */ useBpmnEditorStore),
/* harmony export */   useBpmnEditorStoreApi: () => (/* binding */ useBpmnEditorStoreApi)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js");
/* harmony import */ var zustand_traditional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zustand/traditional */ "../../node_modules/.pnpm/zustand@4.4.2_patch_hash=7tws22nsyaxzkdpquvgytzpdve_@types+react@17.0.21_immer@10.0.3_patch_h_vz3zp2qtqlfadsspbucjfdwwom/node_modules/zustand/esm/traditional.mjs");


const BpmnEditorStoreApiContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});
function useBpmnEditorStore(selector, equalityFn) {
  const store = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BpmnEditorStoreApiContext);
  if (store === null) {
    throw new Error("Can't use BPMN Editor Store outside of the BpmnEditor component.");
  }
  return (0,zustand_traditional__WEBPACK_IMPORTED_MODULE_1__.useStoreWithEqualityFn)(store, selector, equalityFn);
}
function useBpmnEditorStoreApi() {
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BpmnEditorStoreApiContext);
}

/***/ })

});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlzYy1lbXB0eS1FbXB0eS1zdG9yaWVzLmI1MTZmMDJmNGNhNDMyNTYyMDBmLmhvdC11cGRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQnFEO0FBQ25CO0FBRzBFO0FBQzNFO0FBQ0Y7QUFDMkM7QUFDcEM7QUFDK0M7QUFDckQ7QUFDK0M7QUFDWDtBQUNoQjtBQUNVO0FBQzZDO0FBQ3pDO0FBQ0k7QUFDaUM7QUFDSztBQUN4QjtBQU10RDtBQUN3QjtBQUNnRztBQUM5QjtBQUNwQjtBQUdoQztBQUdZO0FBQ0o7QUFDbEQ7QUFFMUIsTUFBTWlDLG1DQUFtQyxHQUFHLEdBQUc7QUFFL0MsTUFBTUMsV0FBVyxHQUFHLEVBQUU7QUE4RWYsTUFBTUMsa0JBQWtCLEdBQUdDLElBQUEsSUFNZ0M7RUFBQSxJQU4vQjtJQUNqQ0MsS0FBSztJQUNMQyxlQUFlO0lBQ2ZDLGFBQWE7SUFDYkMsMkJBQTJCO0lBQzNCQztFQUFVLENBQ2tELEdBQUFMLElBQUE7RUFDNUQsTUFBTU0scUJBQXFCLEdBQUdqQix3RUFBa0IsQ0FBRWtCLENBQUMsSUFBS0EsQ0FBQyxDQUFDQyxlQUFlLENBQUNDLE1BQU0sQ0FBQztFQUNqRixNQUFNQyxJQUFJLEdBQUdyQix3RUFBa0IsQ0FBRWtCLENBQUMsSUFBS0EsQ0FBQyxDQUFDRyxJQUFJLENBQUM7RUFDOUMsTUFBTUMsMEJBQTBCLEdBQUd0Qix3RUFBa0IsQ0FBRWtCLENBQUMsSUFBS0EsQ0FBQyxDQUFDSyxRQUFRLENBQUNMLENBQUMsQ0FBQyxDQUFDSSwwQkFBMEIsRUFBRSxDQUFDO0VBQ3hHLE1BQU1FLGtCQUFrQixHQUFHdkIsMkVBQXFCLEVBQUU7RUFDbEQsTUFBTTtJQUFFd0I7RUFBVyxDQUFFLEdBQUduQiwrRUFBVyxFQUFFO0VBRXJDLE1BQU07SUFBRW9CLHlCQUF5QjtJQUFFQztFQUF3QixDQUFFLEdBQUd2QyxpRUFBYSxFQUFFO0VBRy9FLE1BQU13QyxVQUFVLEdBQUc3Qyw2Q0FBTSxDQUFxRSxJQUFJLENBQUM7RUFDbkcsTUFBTThDLG1CQUFtQixHQUFHOUMsNkNBQU0sQ0FBaUIsSUFBSSxDQUFDO0VBR3hERiwwREFBbUIsQ0FDakJtQyxVQUFVLEVBQ1YsT0FBTztJQUNMYyxLQUFLLEVBQUdsQixLQUFLLElBQUk7TUFDZixNQUFNbUIsS0FBSyxHQUFHUCxrQkFBa0IsQ0FBQ1EsUUFBUSxFQUFFO01BQzNDLE9BQU9ELEtBQUssQ0FBQ0UsUUFBUSxDQUFDRixLQUFLLENBQUMsQ0FBQ0QsS0FBSyxDQUFDckMsb0VBQVMsQ0FBQ21CLEtBQUssQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFDRHNCLGFBQWEsRUFBRSxNQUFBQSxDQUFBLEtBQVc7O01BQ3hCLE1BQU1DLEtBQUssR0FBRyxDQUFBQyxFQUFBLElBQUFDLEVBQUEsR0FBQVQsVUFBVSxDQUFDVSxPQUFPLGNBQUFELEVBQUEsdUJBQUFBLEVBQUEsQ0FBRUUsb0JBQW9CLEVBQUUsY0FBQUgsRUFBQSx1QkFBQUEsRUFBQSxDQUFFSSxRQUFRLEVBRUQ7TUFFakUsTUFBTUMsS0FBSyxHQUFHLENBQUFDLEVBQUEsSUFBQUMsRUFBQSxHQUFBZixVQUFVLENBQUNVLE9BQU8sY0FBQUssRUFBQSx1QkFBQUEsRUFBQSxDQUFFSixvQkFBb0IsRUFBRSxjQUFBRyxFQUFBLHVCQUFBQSxFQUFBLENBQUVFLFFBQVEsRUFBRTtNQUNwRSxJQUFJLENBQUNULEtBQUssSUFBSSxDQUFDTSxLQUFLLEVBQUU7UUFDcEIsT0FBT0ksU0FBUztNQUNsQjtNQUVBLE1BQU1DLE1BQU0sR0FBRzVELHNEQUFpQixDQUFDaUQsS0FBSyxDQUFDO01BQ3ZDLE1BQU1KLEtBQUssR0FBR1Asa0JBQWtCLENBQUNRLFFBQVEsRUFBRTtNQUUzQyxNQUFNZ0IsR0FBRyxHQUFHQyxRQUFRLENBQUNDLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxLQUFLLENBQUM7TUFDekVGLEdBQUcsQ0FBQ0csWUFBWSxDQUFDLE9BQU8sRUFBRUwsTUFBTSxDQUFDTSxLQUFLLEdBQUczQyxXQUFXLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztNQUM5RHVDLEdBQUcsQ0FBQ0csWUFBWSxDQUNkLFFBQVEsRUFFUkwsTUFBTSxDQUFDTyxNQUFNLEdBQUc1QyxXQUFXLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FDckM7TUFJRHpCLDZDQUFlLENBRWJ1RSxzREFBQTtRQUFHQyxTQUFTLEVBQUUsYUFBYSxDQUFDVixNQUFNLENBQUNXLENBQUMsR0FBR2hELFdBQVcsSUFBSSxDQUFDcUMsTUFBTSxDQUFDWSxDQUFDLEdBQUdqRCxXQUFXLEdBQUc7UUFBQWtELFFBQUEsRUFDOUVKLHNEQUFBLENBQUNyRCxnRUFBYztVQUFDaUMsS0FBSyxFQUFFQSxLQUFLO1VBQUVNLEtBQUssRUFBRUEsS0FBSztVQUFFbUIsUUFBUSxFQUFFN0IsS0FBSyxDQUFDOEIscUJBQXFCLENBQUNEO1FBQVE7TUFBSSxFQUM1RixFQUNKWixHQUFHLENBQ0o7TUFFRCxPQUFPLElBQUljLGFBQWEsRUFBRSxDQUFDQyxpQkFBaUIsQ0FBQ2YsR0FBRyxDQUFDO0lBQ25ELENBQUM7SUFDRGdCLFdBQVcsRUFBRUEsQ0FBQSxLQUFNdkMsV0FBVyxDQUFDYTtHQUNoQyxDQUFDLEVBQ0YsQ0FBQ2Qsa0JBQWtCLEVBQUVDLFdBQVcsQ0FBQyxDQUNsQztFQUdEckIsdUlBQXlCLENBQUMsTUFBSztJQUM3Qm9CLGtCQUFrQixDQUFDeUMsUUFBUSxDQUFFbEMsS0FBSyxJQUFJO01BRXBDLElBQUluQixLQUFLLEtBQUtsQyxnREFBUSxDQUFDcUQsS0FBSyxDQUFDVixJQUFJLENBQUNULEtBQUssQ0FBQyxFQUFFO1FBQ3hDO01BQ0Y7TUFFQW1CLEtBQUssQ0FBQ1YsSUFBSSxDQUFDVCxLQUFLLEdBQUduQixvRUFBUyxDQUFDbUIsS0FBSyxDQUFDO01BRW5DYyx5QkFBeUIsQ0FBQ1ksT0FBTyxHQUFHUCxLQUFLLENBQUNWLElBQUksQ0FBQ1QsS0FBSztJQUN0RCxDQUFDLENBQUM7RUFDSixDQUFDLEVBQUUsQ0FBQ1ksa0JBQWtCLEVBQUVaLEtBQUssQ0FBQyxDQUFDO0VBRS9CVCxxS0FBd0MsQ0FDdENrQixJQUFJLENBQUNULEtBQUssRUFDVlUsMEJBQTBCLEVBQzFCMUMsa0RBQVcsQ0FBRXNGLElBQUksSUFBTXhDLHlCQUF5QixDQUFDWSxPQUFPLEdBQUc0QixJQUFLLEVBQUUsQ0FBQ3hDLHlCQUF5QixDQUFDLENBQUMsQ0FDL0Y7RUFHRHRCLHVJQUF5QixDQUFDLE1BQUs7SUFDN0IsSUFBSWtCLDBCQUEwQixFQUFFO01BQzlCO0lBQ0Y7SUFDQVAsMkJBQTJCLGFBQTNCQSwyQkFBMkIsdUJBQTNCQSwyQkFBMkIsQ0FBRyxLQUFLLENBQUM7SUFFcEMsTUFBTW9ELE9BQU8sR0FBR0MsVUFBVSxDQUFDLE1BQUs7TUFHOUIsSUFBSXhELEtBQUssS0FBS1MsSUFBSSxDQUFDVCxLQUFLLEVBQUU7UUFDeEI7TUFDRjtNQUVBRywyQkFBMkIsYUFBM0JBLDJCQUEyQix1QkFBM0JBLDJCQUEyQixDQUFHLElBQUksQ0FBQztNQUNuQ3NELE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLDZCQUE2QixDQUFDO01BQzVDeEQsYUFBYSxhQUFiQSxhQUFhLHVCQUFiQSxhQUFhLENBQUdPLElBQUksQ0FBQ1QsS0FBSyxDQUFDO0lBQzdCLENBQUMsRUFBRUosbUNBQW1DLENBQUM7SUFFdkMsT0FBTyxNQUFLO01BQ1YrRCxZQUFZLENBQUNKLE9BQU8sQ0FBQztJQUN2QixDQUFDO0VBQ0gsQ0FBQyxFQUFFLENBQUM3QywwQkFBMEIsRUFBRVIsYUFBYSxFQUFFTyxJQUFJLENBQUNULEtBQUssQ0FBQyxDQUFDO0VBRTNELE1BQU1PLGVBQWUsR0FBR3JDLDhDQUFPLENBQUMsTUFBTXlFLHNEQUFBLENBQUNoRCw4RUFBZSxLQUFHLEVBQUUsRUFBRSxDQUFDO0VBRTlELE9BQ0VnRCxzREFBQTtJQUFLaUIsR0FBRyxFQUFFN0Msd0JBQXdCO0lBQUU4QyxTQUFTLEVBQUUsdUJBQXVCO0lBQUFkLFFBQUEsRUFDcEVKLHNEQUFBLENBQUNoRixxRkFBTTtNQUFDbUcsVUFBVSxFQUFFekQscUJBQXFCO01BQUUwRCxRQUFRLEVBQUUsSUFBSTtNQUFFQyxRQUFRLEVBQUUsT0FBTztNQUFBakIsUUFBQSxFQUMxRUosc0RBQUEsQ0FBQy9FLDRGQUFhO1FBQUNxRyxZQUFZLEVBQUUxRCxlQUFlO1FBQUF3QyxRQUFBLEVBQzFDSixzREFBQSxDQUFDOUUsZ0dBQWlCO1VBQUFrRixRQUFBLEVBQ2hCbUIsdURBQUE7WUFDRUwsU0FBUyxFQUFFLG9DQUFvQztZQUMvQ0QsR0FBRyxFQUFFM0MsbUJBQW1CO1lBQUEsZUFDWCxvQ0FBb0M7WUFBQThCLFFBQUEsR0FFaEQ5QyxlQUFlLElBQUkwQyxzREFBQSxDQUFDaEUsdUVBQWdCO2NBQUN3RixPQUFPLEVBQUVsRTtZQUFlLEVBQUksRUFDbEUwQyxzREFBQSxDQUFDakUsNkRBQVc7Y0FBQ3NDLFVBQVUsRUFBRUEsVUFBVTtjQUFFb0QsU0FBUyxFQUFFbkQ7WUFBbUIsRUFBSTtVQUFBO1FBQ25FO01BQ1k7SUFDTjtFQUNULEVBQ0w7QUFFVixDQUFDO0FBRU0sTUFBTW9ELFVBQVUsZ0JBQUd0Ryw2Q0FBZ0IsQ0FBQyxDQUFDdUcsS0FBc0IsRUFBRVYsR0FBNkIsS0FBSTtFQUNuRyxNQUFNVyxLQUFLLEdBQUdyRyw4Q0FBTyxDQUNuQixNQUNFZSxvRUFBcUIsQ0FBQ3FGLEtBQUssQ0FBQ3RFLEtBQUssRUFBRSxJQUFJakIsa0hBQWtCLENBQWdDRCxnRkFBc0IsQ0FBQyxDQUFDLEVBR25ILEVBQUUsQ0FDSDtFQUNELE1BQU0wRixRQUFRLEdBQUd6Ryx5Q0FBWSxDQUFld0csS0FBSyxDQUFDO0VBRWxELE1BQU1FLFVBQVUsR0FBOEN6RyxrREFBVyxDQUFDMEcsS0FBQSxJQUFhO0lBQUEsSUFBWjtNQUFFQztJQUFJLENBQUUsR0FBQUQsS0FBQTs7SUFDakYsQ0FBQWpELEVBQUEsR0FBQStDLFFBQVEsQ0FBQzlDLE9BQU8sY0FBQUQsRUFBQSx1QkFBQUEsRUFBQSxDQUFFNEIsUUFBUSxDQUFFbEMsS0FBSyxJQUFJO01BQ25DQSxLQUFLLENBQUN5RCxPQUFPLEdBQUcxRixvRUFBcUIsRUFBRSxDQUFDMEYsT0FBTztNQUMvQ3pELEtBQUssQ0FBQ1YsSUFBSSxDQUFDVCxLQUFLLEdBQUcyRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzVCLENBQUMsQ0FBQztFQUNKLENBQUMsRUFBRSxFQUFFLENBQUM7RUFFTixPQUNFaEMsc0RBQUEsQ0FBQ3BFLHlFQUF5QjtJQUFBLEdBQUsrRixLQUFLO0lBQUF2QixRQUFBLEVBQ2xDSixzREFBQSxDQUFDdEUsZ0VBQWE7TUFBQ3dHLGlCQUFpQixFQUFFcEcsNkVBQXVCO01BQUVxRyxPQUFPLEVBQUVMLFVBQVU7TUFBQTFCLFFBQUEsRUFDNUVKLHNEQUFBLENBQUMvRCxvSEFBdUM7UUFBQSxHQUFLMEYsS0FBSztRQUFBdkIsUUFBQSxFQUNoREosc0RBQUEsQ0FBQ3hELDJFQUF5QixDQUFDNEYsUUFBUTtVQUFDQyxLQUFLLEVBQUVSLFFBQVEsQ0FBQzlDLE9BQU87VUFBQXFCLFFBQUEsRUFDekRKLHNEQUFBLENBQUMzRCx1SEFBb0MsQ0FBQytGLFFBQVE7WUFBQ0MsS0FBSyxFQUFFUixRQUFRLENBQUM5QyxPQUFPO1lBQUFxQixRQUFBLEVBQ3BFSixzREFBQSxDQUFDbEQsdUZBQXVCO2NBQUFzRCxRQUFBLEVBQ3RCSixzREFBQSxDQUFDN0Msa0JBQWtCO2dCQUFDTSxVQUFVLEVBQUV3RCxHQUFHO2dCQUFBLEdBQU1VO2NBQUs7WUFBSTtVQUMxQjtRQUNvQjtNQUNiO0lBQ0c7RUFDNUIsRUFDVTtBQUVoQyxDQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzUmdEO0FBR1c7QUFPdEQsTUFBTW5GLHlCQUF5QixnQkFBRzhGLG9EQUFhLENBQWUsRUFBUyxDQUFDO0FBRXpFLFNBQVU3RixrQkFBa0JBLENBQ2hDZ0csUUFBc0MsRUFDdENDLFVBQXNEO0VBRXRELE1BQU1kLEtBQUssR0FBR1csaURBQVUsQ0FBQy9GLHlCQUF5QixDQUFDO0VBRW5ELElBQUlvRixLQUFLLEtBQUssSUFBSSxFQUFFO0lBQ2xCLE1BQU0sSUFBSWUsS0FBSyxDQUFDLGtFQUFrRSxDQUFDO0VBQ3JGO0VBRUEsT0FBT0gsMkVBQXNCLENBQUNaLEtBQUssRUFBRWEsUUFBUSxFQUFFQyxVQUFVLENBQUM7QUFDNUQ7QUFFTSxTQUFVaEcscUJBQXFCQSxDQUFBO0VBQ25DLE9BQU82RixpREFBVSxDQUFDL0YseUJBQXlCLENBQUM7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2llLXRvb2xzL2JwbW4tZWRpdG9yLy4vc3JjL0JwbW5FZGl0b3IudHN4Iiwid2VicGFjazovL0BraWUtdG9vbHMvYnBtbi1lZGl0b3IvLi9zcmMvc3RvcmUvU3RvcmVDb250ZXh0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBcIkBwYXR0ZXJuZmx5L3JlYWN0LWNvcmUvZGlzdC9zdHlsZXMvYmFzZS5jc3NcIjtcbmltcG9ydCBcInJlYWN0Zmxvdy9kaXN0L3N0eWxlLmNzc1wiO1xuXG5pbXBvcnQgeyBBbGxCcG1uTWFyc2hhbGxlcnMsIEJwbW5MYXRlc3RNb2RlbCB9IGZyb20gXCJAa2llLXRvb2xzL2JwbW4tbWFyc2hhbGxlclwiO1xuaW1wb3J0IHsgRHJhd2VyLCBEcmF3ZXJDb250ZW50LCBEcmF3ZXJDb250ZW50Qm9keSB9IGZyb20gXCJAcGF0dGVybmZseS9yZWFjdC1jb3JlL2Rpc3QvanMvY29tcG9uZW50cy9EcmF3ZXJcIjtcbmltcG9ydCB7IG9yaWdpbmFsIH0gZnJvbSBcImltbWVyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VJbXBlcmF0aXZlSGFuZGxlLCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IEVycm9yQm91bmRhcnksIEVycm9yQm91bmRhcnlQcm9wc1dpdGhGYWxsYmFjayB9IGZyb20gXCJyZWFjdC1lcnJvci1ib3VuZGFyeVwiO1xuaW1wb3J0ICogYXMgUkYgZnJvbSBcInJlYWN0Zmxvd1wiO1xuaW1wb3J0IHsgQnBtbkVkaXRvckNvbnRleHRQcm92aWRlciwgdXNlQnBtbkVkaXRvciB9IGZyb20gXCIuL0JwbW5FZGl0b3JDb250ZXh0XCI7XG5pbXBvcnQgeyBCcG1uRWRpdG9yRXJyb3JGYWxsYmFjayB9IGZyb20gXCIuL0JwbW5FZGl0b3JFcnJvckZhbGxiYWNrXCI7XG5pbXBvcnQgeyBCcG1uRGlhZ3JhbSB9IGZyb20gXCIuL2RpYWdyYW0vQnBtbkRpYWdyYW1cIjtcbmltcG9ydCB7IEJwbW5WZXJzaW9uTGFiZWwgfSBmcm9tIFwiLi9kaWFncmFtL0JwbW5WZXJzaW9uTGFiZWxcIjtcbmltcG9ydCB7IEJwbW5FZGl0b3JFeHRlcm5hbE1vZGVsc0NvbnRleHRQcm92aWRlciB9IGZyb20gXCIuL2V4dGVybmFsTW9kZWxzL0JwbW5FZGl0b3JFeHRlcm5hbE1vZGVsc0NvbnRleHRcIjtcbmltcG9ydCB7IE5vcm1hbGl6ZWQsIG5vcm1hbGl6ZSB9IGZyb20gXCIuL25vcm1hbGl6YXRpb24vbm9ybWFsaXplXCI7XG5pbXBvcnQgeyBJTklUSUFMX0NPTVBVVEVEX0NBQ0hFIH0gZnJvbSBcIi4vc3RvcmUvaW5pdGlhbENvbXB1dGVkQ2FjaGVcIjtcbmltcG9ydCB7IENvbXB1dGVkU3RhdGVDYWNoZSB9IGZyb20gXCJAa2llLXRvb2xzL3h5Zmxvdy1yZWFjdC1raWUtZGlhZ3JhbS9kaXN0L3N0b3JlL0NvbXB1dGVkU3RhdGVDYWNoZVwiO1xuaW1wb3J0IHsgWHlGbG93UmVhY3RLaWVEaWFncmFtU3RvcmVBcGlDb250ZXh0IH0gZnJvbSBcIkBraWUtdG9vbHMveHlmbG93LXJlYWN0LWtpZS1kaWFncmFtL2Rpc3Qvc3RvcmUvU3RvcmVcIjtcbmltcG9ydCB7IFN0YXRlLCBjcmVhdGVCcG1uRWRpdG9yU3RvcmUsIGdldERlZmF1bHRTdGF0aWNTdGF0ZSB9IGZyb20gXCIuL3N0b3JlL1N0b3JlXCI7XG5pbXBvcnQge1xuICBCcG1uRWRpdG9yU3RvcmVBcGlDb250ZXh0LFxuICBTdG9yZUFwaVR5cGUsXG4gIHVzZUJwbW5FZGl0b3JTdG9yZSxcbiAgdXNlQnBtbkVkaXRvclN0b3JlQXBpLFxufSBmcm9tIFwiLi9zdG9yZS9TdG9yZUNvbnRleHRcIjtcbmltcG9ydCB7IEJwbW5EaWFncmFtU3ZnIH0gZnJvbSBcIi4vc3ZnL0JwbW5EaWFncmFtU3ZnXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZUFzSXRXYXNCZWZvcmVDb25kaXRpb25CZWNhbWVUcnVlIH0gZnJvbSBcIkBraWUtdG9vbHMveHlmbG93LXJlYWN0LWtpZS1kaWFncmFtL2Rpc3QvcmVhY3RFeHQvdXNlU3RhdGVBc0l0V2FzQmVmb3JlQ29uZGl0aW9uQmVjYW1lVHJ1ZVwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0QWZ0ZXJGaXJzdFJlbmRlciB9IGZyb20gXCJAa2llLXRvb2xzL3h5Zmxvdy1yZWFjdC1raWUtZGlhZ3JhbS9kaXN0L3JlYWN0RXh0L3VzZUVmZmVjdEFmdGVyRmlyc3RSZW5kZXJcIjtcbmltcG9ydCB7IENvbW1hbmRzLCBDb21tYW5kc0NvbnRleHRQcm92aWRlciwgdXNlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kcy9Db21tYW5kc0NvbnRleHRQcm92aWRlclwiO1xuaW1wb3J0IHsgRGlhZ3JhbVJlZiB9IGZyb20gXCJAa2llLXRvb2xzL3h5Zmxvdy1yZWFjdC1raWUtZGlhZ3JhbS9kaXN0L2RpYWdyYW0vWHlGbG93UmVhY3RLaWVEaWFncmFtXCI7XG5pbXBvcnQgeyBCcG1uRGlhZ3JhbUVkZ2VEYXRhLCBCcG1uRGlhZ3JhbU5vZGVEYXRhLCBCcG1uTm9kZUVsZW1lbnQsIEJwbW5Ob2RlVHlwZSB9IGZyb20gXCIuL2RpYWdyYW0vQnBtbkRpYWdyYW1Eb21haW5cIjtcbmltcG9ydCB7IFByb3BlcnRpZXNQYW5lbCB9IGZyb20gXCIuL3Byb3BlcnRpZXNQYW5lbC9Qcm9wZXJ0aWVzUGFuZWxcIjtcblxuLy8gTGVhdmUgY3VzdG9tIENTUyBhbHdheXMgZm9yIGxhc3QuXG5pbXBvcnQgXCJAa2llLXRvb2xzL3h5Zmxvdy1yZWFjdC1raWUtZGlhZ3JhbS9kaXN0L3BhdHRlcm5mbHktY3VzdG9taXphdGlvbnMuY3NzXCI7XG5pbXBvcnQgXCJAa2llLXRvb2xzL3h5Zmxvdy1yZWFjdC1raWUtZGlhZ3JhbS9kaXN0L3h5Zmxvdy1jdXN0b21pemF0aW9ucy5jc3NcIjtcbmltcG9ydCBcIi4vQnBtbkVkaXRvci5jc3NcIjtcblxuY29uc3QgT05fTU9ERUxfQ0hBTkdFX0RFQk9VTkNFX1RJTUVfSU5fTVMgPSA1MDA7XG5cbmNvbnN0IFNWR19QQURESU5HID0gMjA7XG5cbmV4cG9ydCB0eXBlIEJwbW5FZGl0b3JSZWYgPSB7XG4gIHJlc2V0OiAobW9kZTogQnBtbkxhdGVzdE1vZGVsKSA9PiB2b2lkO1xuICBnZXREaWFncmFtU3ZnOiAoKSA9PiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD47XG4gIGdldENvbW1hbmRzOiAoKSA9PiBDb21tYW5kcztcbn07XG5cbmV4cG9ydCB0eXBlIE9uQnBtbk1vZGVsQ2hhbmdlID0gKG1vZGVsOiBOb3JtYWxpemVkPEJwbW5MYXRlc3RNb2RlbD4pID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIE9uUmVxdWVzdFRvSnVtcFRvUGF0aCA9IChub3JtYWxpemVkUG9zaXhQYXRoUmVsYXRpdmVUb1RoZU9wZW5GaWxlOiBzdHJpbmcpID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBPblJlcXVlc3RUb1Jlc29sdmVQYXRoID0gKG5vcm1hbGl6ZWRQb3NpeFBhdGhSZWxhdGl2ZVRvVGhlT3BlbkZpbGU6IHN0cmluZykgPT4gc3RyaW5nO1xuXG4vKiogQHJldHVybnMgYSBsaXN0IG9mIHBhdGhzIHJlbGF0aXZlIHRvIHRoZSBvcGVuIGZpbGUuICovXG5leHBvcnQgdHlwZSBPblJlcXVlc3RFeHRlcm5hbE1vZGVsc0F2YWlsYWJsZVRvSW5jbHVkZSA9ICgpID0+IFByb21pc2U8c3RyaW5nW10+O1xuXG5leHBvcnQgdHlwZSBPblJlcXVlc3RFeHRlcm5hbE1vZGVsQnlQYXRoID0gKFxuICBub3JtYWxpemVkUG9zaXhQYXRoUmVsYXRpdmVUb1RoZU9wZW5GaWxlOiBzdHJpbmdcbikgPT4gUHJvbWlzZTxFeHRlcm5hbE1vZGVsIHwgbnVsbD47XG5cbmV4cG9ydCB0eXBlIEV4dGVybmFsTW9kZWxzSW5kZXggPSBSZWNvcmQ8XG4gIHN0cmluZyAvKiogbm9ybWFsaXplZFBvc2l4UGF0aFJlbGF0aXZlVG9UaGVPcGVuRmlsZSAqLyxcbiAgRXh0ZXJuYWxNb2RlbCB8IHVuZGVmaW5lZFxuPjtcbmV4cG9ydCB0eXBlIEV4dGVybmFsTW9kZWwgPSB7IHR5cGU6IFwiZG1uXCIgfSAmIEV4dGVybmFsRG1uO1xuXG5leHBvcnQgdHlwZSBFeHRlcm5hbERtbnNJbmRleCA9IE1hcDxzdHJpbmcgLyoqIG5vcm1hbGl6ZWRQb3NpeFBhdGhSZWxhdGl2ZVRvVGhlT3BlbkZpbGUgKi8sIEV4dGVybmFsRG1uPjtcbmV4cG9ydCB0eXBlIEV4dGVybmFsRG1uID0ge1xuICBtb2RlbDogTm9ybWFsaXplZDxCcG1uTGF0ZXN0TW9kZWw+O1xuICBub3JtYWxpemVkUG9zaXhQYXRoUmVsYXRpdmVUb1RoZU9wZW5GaWxlOiBzdHJpbmc7XG4gIHN2Zzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgQnBtbkVkaXRvclByb3BzID0ge1xuICAvKipcbiAgICogVGhlIEJQTU4gaXRzZWxmLlxuICAgKi9cbiAgbW9kZWw6IEJwbW5MYXRlc3RNb2RlbDtcbiAgLyoqXG4gICAqIFRoZSBvcmlnaW5hbCB2ZXJzaW9uIG9mIGBtb2RlbGAgYmVmb3JlIHVwZ3JhZGluZyB0byBgbGF0ZXN0YC5cbiAgICovXG4gIG9yaWdpbmFsVmVyc2lvbj86IEFsbEJwbW5NYXJzaGFsbGVyc1tcInZlcnNpb25cIl07XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGNoYW5nZSBvY2N1cnMgb24gYG1vZGVsYCwgc28gdGhlIGNvbnRyb2xsZWQgZmxvdyBvZiB0aGUgY29tcG9uZW50IGNhbiBiZSBkb25lLlxuICAgKi9cbiAgb25Nb2RlbENoYW5nZT86IE9uQnBtbk1vZGVsQ2hhbmdlO1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIGluc3RhbmNlIG9mIEJQTU4gRWRpdG9yIGlzIHJ1bm5pbmcuIEZvciBleGFtcGxlLCBpZiB0aGlzIEJQTU4gRWRpdG9yIGluc3RhbmNlXG4gICAqIGlzIGRpc3BsYXlpbmcgYSBtb2RlbCBmcm9tIGEgcHJvamVjdCBjYWxsZWQgXCJNeSBwcm9qZWN0XCIsIHlvdSBjb3VsZCB1c2UgYGV4dGVybmFsQ29udGV4dE5hbWU9e1wiTXkgcHJvamVjdFwifWBcbiAgICovXG4gIGV4dGVybmFsQ29udGV4dE5hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEZXNjcmliZSB0aGUgY29udGV4dCBpbiB3aGljaCB0aGlzIGluc3RhbmNlIG9mIEJQTU4gRWRpdG9yIGlzIHJ1bm5pbmcuIEZvciBleGFtcGxlLCBpZiB0aGlzIEJQTU4gRWRpdG9yIGluc3RhbmNlXG4gICAqIGlzIGRpc3BsYXlpbmcgYSBtb2RlbCBmcm9tIGEgcHJvamVjdCBjYWxsZWQgXCJNeSBwcm9qZWN0XCIsIHlvdSBjb3VsZCB1c2VcbiAgICogYGV4dGVybmFsQ29udGV4dERlc2NyaXB0aW9uPXsnQWxsIG1vZGVscyAoRE1OLCBldGMpIG9mIFwiTXkgcHJvamVjdFwiIGFyZSBhdmFpbGFibGUuJ31gXG4gICAqL1xuICBleHRlcm5hbENvbnRleHREZXNjcmlwdGlvbj86IHN0cmluZztcbiAgLyoqXG4gICAqIEEgbGluayB0aGF0IHdpbGwgdGFrZSB1c2VycyB0byBhbiBpc3N1ZSB0cmFja2VyIHNvIHRoZXkgY2FuIHJlcG9ydCBwcm9ibGVtcyB0aGV5IGZpbmQgb24gdGhlIEJQTU4gRWRpdG9yLlxuICAgKiBUaGlzIGlzIHNob3duIG9uIHRoZSBFcnJvckJvdW5kYXJ5IGZhbGxiYWNrIGNvbXBvbmVudCwgd2hlbiBhbiB1bmNhdWdodCBlcnJvciBoYXBwZW5zLlxuICAgKi9cbiAgaXNzdWVUcmFja2VySHJlZj86IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZW4gdXNlcnMgd2FudCB0byBqdW1wIHRvIGFub3RoZXIgZmlsZSwgdGhpcyBtZXRob2QgaXMgY2FsbGVkLCBhbGxvd2luZyB0aGUgY29udHJvbGxlciBvZiB0aGlzIGNvbXBvbmVudCBkZWNpZGUgd2hhdCB0byBkby5cbiAgICogTGlua3MgYXJlIG9ubHkgcmVuZGVyZWQgaWYgdGhpcyBpcyBwcm92aWRlZC4gT3RoZXJ3aXNlLCBwYXRocyB3aWxsIGJlIHJlbmRlcmVkIGFzIHRleHQuXG4gICAqL1xuICBvblJlcXVlc3RUb0p1bXBUb1BhdGg/OiBPblJlcXVlc3RUb0p1bXBUb1BhdGg7XG4gIC8qKlxuICAgKiBBbGwgcGF0aHMgaW5zaWRlIHRoZSBCUE1OIEVkaXRvciBhcmUgcmVsYXRpdmUuIFRvIGJlIGFibGUgdG8gcmVzb2x2ZSB0aGVtIGFuZCBkaXNwbGF5IHRoZW0gYXMgYWJzb2x1dGUgcGF0aHMsIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgKiBJZiB1bmRlZmluZWQsIHRoZSByZWxhdGl2ZSBwYXRocyB3aWxsIGJlIGRpc3BsYXllZC5cbiAgICovXG4gIG9uUmVxdWVzdFRvUmVzb2x2ZVBhdGg/OiBPblJlcXVlc3RUb1Jlc29sdmVQYXRoO1xuICAvKipcbiAgICogTm90aWZpZXMgdGhlIGNhbGxlciB3aGVuIHRoZSBCUE1OIEVkaXRvciBwZXJmb3JtcyBhIG5ldyBlZGl0IGFmdGVyIHRoZSBkZWJvdW5jZSB0aW1lLlxuICAgKi9cbiAgb25Nb2RlbERlYm91bmNlU3RhdGVDaGFuZ2VkPzogKGNoYW5nZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgY29uc3QgQnBtbkVkaXRvckludGVybmFsID0gKHtcbiAgbW9kZWwsXG4gIG9yaWdpbmFsVmVyc2lvbixcbiAgb25Nb2RlbENoYW5nZSxcbiAgb25Nb2RlbERlYm91bmNlU3RhdGVDaGFuZ2VkLFxuICBmb3J3YXJkUmVmLFxufTogQnBtbkVkaXRvclByb3BzICYgeyBmb3J3YXJkUmVmPzogUmVhY3QuUmVmPEJwbW5FZGl0b3JSZWY+IH0pID0+IHtcbiAgY29uc3QgaXNQcm9wZXJ0aWVzUGFuZWxPcGVuID0gdXNlQnBtbkVkaXRvclN0b3JlKChzKSA9PiBzLnByb3BlcnRpZXNQYW5lbC5pc09wZW4pO1xuICBjb25zdCBicG1uID0gdXNlQnBtbkVkaXRvclN0b3JlKChzKSA9PiBzLmJwbW4pO1xuICBjb25zdCBpc0RpYWdyYW1FZGl0aW5nSW5Qcm9ncmVzcyA9IHVzZUJwbW5FZGl0b3JTdG9yZSgocykgPT4gcy5jb21wdXRlZChzKS5pc0RpYWdyYW1FZGl0aW5nSW5Qcm9ncmVzcygpKTtcbiAgY29uc3QgYnBtbkVkaXRvclN0b3JlQXBpID0gdXNlQnBtbkVkaXRvclN0b3JlQXBpKCk7XG4gIGNvbnN0IHsgY29tbWFuZHNSZWYgfSA9IHVzZUNvbW1hbmRzKCk7XG5cbiAgY29uc3QgeyBicG1uTW9kZWxCZWZvcmVFZGl0aW5nUmVmLCBicG1uRWRpdG9yUm9vdEVsZW1lbnRSZWYgfSA9IHVzZUJwbW5FZGl0b3IoKTtcblxuICAvLyBSZWZzXG4gIGNvbnN0IGRpYWdyYW1SZWYgPSB1c2VSZWY8RGlhZ3JhbVJlZjxCcG1uTm9kZVR5cGUsIEJwbW5EaWFncmFtTm9kZURhdGEsIEJwbW5EaWFncmFtRWRnZURhdGE+PihudWxsKTtcbiAgY29uc3QgZGlhZ3JhbUNvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG5cbiAgLy8gQWxsb3cgaW1wZXJhdGl2ZWxseSBjb250cm9sbGluZyB0aGUgRWRpdG9yLlxuICB1c2VJbXBlcmF0aXZlSGFuZGxlKFxuICAgIGZvcndhcmRSZWYsXG4gICAgKCkgPT4gKHtcbiAgICAgIHJlc2V0OiAobW9kZWwpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBicG1uRWRpdG9yU3RvcmVBcGkuZ2V0U3RhdGUoKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmRpc3BhdGNoKHN0YXRlKS5yZXNldChub3JtYWxpemUobW9kZWwpKTtcbiAgICAgIH0sXG4gICAgICBnZXREaWFncmFtU3ZnOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gZGlhZ3JhbVJlZi5jdXJyZW50Py5nZXRSZWFjdEZsb3dJbnN0YW5jZSgpPy5nZXROb2RlcygpIGFzICAvLyBUaGlzIGNhc3RpbmcgaXMgcmVxdWlyZWQgYmVjYXVzZSBYWUZsb3cgZG9lc24ndCBjb3JyZWN0bHkgdHlwZSB0aGUgXCJnZXROb2RlcygpXCIgZnVuY3Rpb24gd2l0aCB0aGUgbm9kZSB0eXBlcy5cbiAgICAgICAgICB8IHVuZGVmaW5lZFxuICAgICAgICAgIHwgUkYuTm9kZTxCcG1uRGlhZ3JhbU5vZGVEYXRhPEJwbW5Ob2RlRWxlbWVudD4sIEJwbW5Ob2RlVHlwZT5bXTtcblxuICAgICAgICBjb25zdCBlZGdlcyA9IGRpYWdyYW1SZWYuY3VycmVudD8uZ2V0UmVhY3RGbG93SW5zdGFuY2UoKT8uZ2V0RWRnZXMoKTtcbiAgICAgICAgaWYgKCFub2RlcyB8fCAhZWRnZXMpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYm91bmRzID0gUkYuZ2V0Tm9kZXNCb3VuZHMobm9kZXMpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGJwbW5FZGl0b3JTdG9yZUFwaS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgYm91bmRzLndpZHRoICsgU1ZHX1BBRERJTkcgKiAyICsgXCJcIik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgXCJoZWlnaHRcIixcbiAgICAgICAgICAvLyBJdCdzIG5vdCBwb3NzaWJsZSB0byBjYWxjdWxhdGUgdGhlIHRleHQgaGVpZ2h0IHdoaWNoIGlzIG91dHNpZGUgb2YgdGhlIG5vZGUgZm9yIHRoZSBkYXRhT2JqZWN0IG5vZGUgc2hhcGVcbiAgICAgICAgICBib3VuZHMuaGVpZ2h0ICsgU1ZHX1BBRERJTkcgKiA1ICsgXCJcIlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFdlJ3JlIHN0aWxsIG9uIFJlYWN0IDE3LlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvbm8tZGVwcmVjYXRlZFxuICAgICAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICAgICAgLy8gSW5kZXBkZW50IG9mIHdoZXJlIHRoZSBub2RlcyBhcmUgbG9jYXRlZCwgdGhleSdsbCBhbHdheXMgYmUgcmVuZGVyZWQgYXQgdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgU1ZHXG4gICAgICAgICAgPGcgdHJhbnNmb3JtPXtgdHJhbnNsYXRlKCR7LWJvdW5kcy54ICsgU1ZHX1BBRERJTkd9ICR7LWJvdW5kcy55ICsgU1ZHX1BBRERJTkd9KWB9PlxuICAgICAgICAgICAgPEJwbW5EaWFncmFtU3ZnIG5vZGVzPXtub2Rlc30gZWRnZXM9e2VkZ2VzfSBzbmFwR3JpZD17c3RhdGUueHlGbG93UmVhY3RLaWVEaWFncmFtLnNuYXBHcmlkfSAvPlxuICAgICAgICAgIDwvZz4sXG4gICAgICAgICAgc3ZnXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKTtcbiAgICAgIH0sXG4gICAgICBnZXRDb21tYW5kczogKCkgPT4gY29tbWFuZHNSZWYuY3VycmVudCxcbiAgICB9KSxcbiAgICBbYnBtbkVkaXRvclN0b3JlQXBpLCBjb21tYW5kc1JlZl1cbiAgKTtcblxuICAvLyBNYWtlIHN1cmUgdGhlIEJQTU4gRWRpdG9yIHJlYWN0cyB0byBwcm9wcyBjaGFuZ2luZy5cbiAgdXNlRWZmZWN0QWZ0ZXJGaXJzdFJlbmRlcigoKSA9PiB7XG4gICAgYnBtbkVkaXRvclN0b3JlQXBpLnNldFN0YXRlKChzdGF0ZSkgPT4ge1xuICAgICAgLy8gQXZvaWQgdW5lY2Vzc2FyeSBzdGF0ZSB1cGRhdGVzXG4gICAgICBpZiAobW9kZWwgPT09IG9yaWdpbmFsKHN0YXRlLmJwbW4ubW9kZWwpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3RhdGUuYnBtbi5tb2RlbCA9IG5vcm1hbGl6ZShtb2RlbCk7XG5cbiAgICAgIGJwbW5Nb2RlbEJlZm9yZUVkaXRpbmdSZWYuY3VycmVudCA9IHN0YXRlLmJwbW4ubW9kZWw7XG4gICAgfSk7XG4gIH0sIFticG1uRWRpdG9yU3RvcmVBcGksIG1vZGVsXSk7XG5cbiAgdXNlU3RhdGVBc0l0V2FzQmVmb3JlQ29uZGl0aW9uQmVjYW1lVHJ1ZShcbiAgICBicG1uLm1vZGVsLFxuICAgIGlzRGlhZ3JhbUVkaXRpbmdJblByb2dyZXNzLFxuICAgIHVzZUNhbGxiYWNrKChwcmV2KSA9PiAoYnBtbk1vZGVsQmVmb3JlRWRpdGluZ1JlZi5jdXJyZW50ID0gcHJldiksIFticG1uTW9kZWxCZWZvcmVFZGl0aW5nUmVmXSlcbiAgKTtcblxuICAvLyBPbmx5IG5vdGlmeSBjaGFuZ2VzIHdoZW4gZHJhZ2dpbmcvcmVzaXppbmcgb3BlcmF0aW9ucyBhcmUgbm90IGhhcHBlbmluZy5cbiAgdXNlRWZmZWN0QWZ0ZXJGaXJzdFJlbmRlcigoKSA9PiB7XG4gICAgaWYgKGlzRGlhZ3JhbUVkaXRpbmdJblByb2dyZXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG9uTW9kZWxEZWJvdW5jZVN0YXRlQ2hhbmdlZD8uKGZhbHNlKTtcblxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIElnbm9yZSBjaGFuZ2VzIG1hZGUgb3V0c2lkZS4uLiBJZiB0aGUgY29udHJvbGxlciBvZiB0aGUgY29tcG9uZW50XG4gICAgICAvLyBjaGFuZ2VkIGl0cyBwcm9wcywgaXQga25vd3MgaXQgYWxyZWFkeSwgd2UgZG9uJ3QgbmVlZCB0byBjYWxsIFwib25Nb2RlbENoYW5nZVwiIGFnYWluLlxuICAgICAgaWYgKG1vZGVsID09PSBicG1uLm1vZGVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb25Nb2RlbERlYm91bmNlU3RhdGVDaGFuZ2VkPy4odHJ1ZSk7XG4gICAgICBjb25zb2xlLmRlYnVnKFwiQlBNTiBFRElUT1I6IE1vZGVsIGNoYW5nZWQhXCIpO1xuICAgICAgb25Nb2RlbENoYW5nZT8uKGJwbW4ubW9kZWwpO1xuICAgIH0sIE9OX01PREVMX0NIQU5HRV9ERUJPVU5DRV9USU1FX0lOX01TKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgfTtcbiAgfSwgW2lzRGlhZ3JhbUVkaXRpbmdJblByb2dyZXNzLCBvbk1vZGVsQ2hhbmdlLCBicG1uLm1vZGVsXSk7XG5cbiAgY29uc3QgcHJvcGVydGllc1BhbmVsID0gdXNlTWVtbygoKSA9PiA8UHJvcGVydGllc1BhbmVsIC8+LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17YnBtbkVkaXRvclJvb3RFbGVtZW50UmVmfSBjbGFzc05hbWU9e1wia2llLWJwbW4tZWRpdG9yLS1yb290XCJ9PlxuICAgICAgPERyYXdlciBpc0V4cGFuZGVkPXtpc1Byb3BlcnRpZXNQYW5lbE9wZW59IGlzSW5saW5lPXt0cnVlfSBwb3NpdGlvbj17XCJyaWdodFwifT5cbiAgICAgICAgPERyYXdlckNvbnRlbnQgcGFuZWxDb250ZW50PXtwcm9wZXJ0aWVzUGFuZWx9PlxuICAgICAgICAgIDxEcmF3ZXJDb250ZW50Qm9keT5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImtpZS1icG1uLWVkaXRvci0tZGlhZ3JhbS1jb250YWluZXJcIn1cbiAgICAgICAgICAgICAgcmVmPXtkaWFncmFtQ29udGFpbmVyUmVmfVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17XCJraWUtYnBtbi1lZGl0b3ItLWRpYWdyYW0tY29udGFpbmVyXCJ9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtvcmlnaW5hbFZlcnNpb24gJiYgPEJwbW5WZXJzaW9uTGFiZWwgdmVyc2lvbj17b3JpZ2luYWxWZXJzaW9ufSAvPn1cbiAgICAgICAgICAgICAgPEJwbW5EaWFncmFtIGRpYWdyYW1SZWY9e2RpYWdyYW1SZWZ9IGNvbnRhaW5lcj17ZGlhZ3JhbUNvbnRhaW5lclJlZn0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRHJhd2VyQ29udGVudEJvZHk+XG4gICAgICAgIDwvRHJhd2VyQ29udGVudD5cbiAgICAgIDwvRHJhd2VyPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IEJwbW5FZGl0b3IgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogQnBtbkVkaXRvclByb3BzLCByZWY6IFJlYWN0LlJlZjxCcG1uRWRpdG9yUmVmPikgPT4ge1xuICBjb25zdCBzdG9yZSA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIGNyZWF0ZUJwbW5FZGl0b3JTdG9yZShwcm9wcy5tb2RlbCwgbmV3IENvbXB1dGVkU3RhdGVDYWNoZTxSZXR1cm5UeXBlPFN0YXRlW1wiY29tcHV0ZWRcIl0+PihJTklUSUFMX0NPTVBVVEVEX0NBQ0hFKSksXG4gICAgLy8gUHVycG9zZWZ1bGx5IGVtcHR5LiBUaGlzIG1lbW9pemVzIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSBzdG9yZVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbXVxuICApO1xuICBjb25zdCBzdG9yZVJlZiA9IFJlYWN0LnVzZVJlZjxTdG9yZUFwaVR5cGU+KHN0b3JlKTtcblxuICBjb25zdCByZXNldFN0YXRlOiBFcnJvckJvdW5kYXJ5UHJvcHNXaXRoRmFsbGJhY2tbXCJvblJlc2V0XCJdID0gdXNlQ2FsbGJhY2soKHsgYXJncyB9KSA9PiB7XG4gICAgc3RvcmVSZWYuY3VycmVudD8uc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICBzdGF0ZS5kaWFncmFtID0gZ2V0RGVmYXVsdFN0YXRpY1N0YXRlKCkuZGlhZ3JhbTtcbiAgICAgIHN0YXRlLmJwbW4ubW9kZWwgPSBhcmdzWzBdO1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8QnBtbkVkaXRvckNvbnRleHRQcm92aWRlciB7Li4ucHJvcHN9PlxuICAgICAgPEVycm9yQm91bmRhcnkgRmFsbGJhY2tDb21wb25lbnQ9e0JwbW5FZGl0b3JFcnJvckZhbGxiYWNrfSBvblJlc2V0PXtyZXNldFN0YXRlfT5cbiAgICAgICAgPEJwbW5FZGl0b3JFeHRlcm5hbE1vZGVsc0NvbnRleHRQcm92aWRlciB7Li4ucHJvcHN9PlxuICAgICAgICAgIDxCcG1uRWRpdG9yU3RvcmVBcGlDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtzdG9yZVJlZi5jdXJyZW50fT5cbiAgICAgICAgICAgIDxYeUZsb3dSZWFjdEtpZURpYWdyYW1TdG9yZUFwaUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3N0b3JlUmVmLmN1cnJlbnR9PlxuICAgICAgICAgICAgICA8Q29tbWFuZHNDb250ZXh0UHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgPEJwbW5FZGl0b3JJbnRlcm5hbCBmb3J3YXJkUmVmPXtyZWZ9IHsuLi5wcm9wc30gLz5cbiAgICAgICAgICAgICAgPC9Db21tYW5kc0NvbnRleHRQcm92aWRlcj5cbiAgICAgICAgICAgIDwvWHlGbG93UmVhY3RLaWVEaWFncmFtU3RvcmVBcGlDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgIDwvQnBtbkVkaXRvclN0b3JlQXBpQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9CcG1uRWRpdG9yRXh0ZXJuYWxNb2RlbHNDb250ZXh0UHJvdmlkZXI+XG4gICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgPC9CcG1uRWRpdG9yQ29udGV4dFByb3ZpZGVyPlxuICApO1xufSk7XG4iLCIvKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBTdG9yZUFwaSwgVXNlQm91bmRTdG9yZSB9IGZyb20gXCJ6dXN0YW5kXCI7XG5pbXBvcnQgeyBXaXRoSW1tZXIgfSBmcm9tIFwienVzdGFuZC9taWRkbGV3YXJlL2ltbWVyXCI7XG5pbXBvcnQgeyB1c2VTdG9yZVdpdGhFcXVhbGl0eUZuIH0gZnJvbSBcInp1c3RhbmQvdHJhZGl0aW9uYWxcIjtcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSBcIi4vU3RvcmVcIjtcblxudHlwZSBFeHRyYWN0U3RhdGUgPSBTdG9yZUFwaTxTdGF0ZT4gZXh0ZW5kcyB7IGdldFN0YXRlOiAoKSA9PiBpbmZlciBUIH0gPyBUIDogbmV2ZXI7XG5cbmV4cG9ydCB0eXBlIFN0b3JlQXBpVHlwZSA9IFVzZUJvdW5kU3RvcmU8V2l0aEltbWVyPFN0b3JlQXBpPFN0YXRlPj4+O1xuXG5leHBvcnQgY29uc3QgQnBtbkVkaXRvclN0b3JlQXBpQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8U3RvcmVBcGlUeXBlPih7fSBhcyBhbnkpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQnBtbkVkaXRvclN0b3JlPFN0YXRlU2xpY2UgPSBFeHRyYWN0U3RhdGU+KFxuICBzZWxlY3RvcjogKHN0YXRlOiBTdGF0ZSkgPT4gU3RhdGVTbGljZSxcbiAgZXF1YWxpdHlGbj86IChhOiBTdGF0ZVNsaWNlLCBiOiBTdGF0ZVNsaWNlKSA9PiBib29sZWFuXG4pIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VDb250ZXh0KEJwbW5FZGl0b3JTdG9yZUFwaUNvbnRleHQpO1xuXG4gIGlmIChzdG9yZSA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHVzZSBCUE1OIEVkaXRvciBTdG9yZSBvdXRzaWRlIG9mIHRoZSBCcG1uRWRpdG9yIGNvbXBvbmVudC5cIik7XG4gIH1cblxuICByZXR1cm4gdXNlU3RvcmVXaXRoRXF1YWxpdHlGbihzdG9yZSwgc2VsZWN0b3IsIGVxdWFsaXR5Rm4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQnBtbkVkaXRvclN0b3JlQXBpKCkge1xuICByZXR1cm4gdXNlQ29udGV4dChCcG1uRWRpdG9yU3RvcmVBcGlDb250ZXh0KTtcbn1cbiJdLCJuYW1lcyI6WyJEcmF3ZXIiLCJEcmF3ZXJDb250ZW50IiwiRHJhd2VyQ29udGVudEJvZHkiLCJvcmlnaW5hbCIsIlJlYWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwidXNlTWVtbyIsInVzZVJlZiIsIlJlYWN0RE9NIiwiRXJyb3JCb3VuZGFyeSIsIlJGIiwiQnBtbkVkaXRvckNvbnRleHRQcm92aWRlciIsInVzZUJwbW5FZGl0b3IiLCJCcG1uRWRpdG9yRXJyb3JGYWxsYmFjayIsIkJwbW5EaWFncmFtIiwiQnBtblZlcnNpb25MYWJlbCIsIkJwbW5FZGl0b3JFeHRlcm5hbE1vZGVsc0NvbnRleHRQcm92aWRlciIsIm5vcm1hbGl6ZSIsIklOSVRJQUxfQ09NUFVURURfQ0FDSEUiLCJDb21wdXRlZFN0YXRlQ2FjaGUiLCJYeUZsb3dSZWFjdEtpZURpYWdyYW1TdG9yZUFwaUNvbnRleHQiLCJjcmVhdGVCcG1uRWRpdG9yU3RvcmUiLCJnZXREZWZhdWx0U3RhdGljU3RhdGUiLCJCcG1uRWRpdG9yU3RvcmVBcGlDb250ZXh0IiwidXNlQnBtbkVkaXRvclN0b3JlIiwidXNlQnBtbkVkaXRvclN0b3JlQXBpIiwiQnBtbkRpYWdyYW1TdmciLCJ1c2VTdGF0ZUFzSXRXYXNCZWZvcmVDb25kaXRpb25CZWNhbWVUcnVlIiwidXNlRWZmZWN0QWZ0ZXJGaXJzdFJlbmRlciIsIkNvbW1hbmRzQ29udGV4dFByb3ZpZGVyIiwidXNlQ29tbWFuZHMiLCJQcm9wZXJ0aWVzUGFuZWwiLCJPTl9NT0RFTF9DSEFOR0VfREVCT1VOQ0VfVElNRV9JTl9NUyIsIlNWR19QQURESU5HIiwiQnBtbkVkaXRvckludGVybmFsIiwiX3JlZiIsIm1vZGVsIiwib3JpZ2luYWxWZXJzaW9uIiwib25Nb2RlbENoYW5nZSIsIm9uTW9kZWxEZWJvdW5jZVN0YXRlQ2hhbmdlZCIsImZvcndhcmRSZWYiLCJpc1Byb3BlcnRpZXNQYW5lbE9wZW4iLCJzIiwicHJvcGVydGllc1BhbmVsIiwiaXNPcGVuIiwiYnBtbiIsImlzRGlhZ3JhbUVkaXRpbmdJblByb2dyZXNzIiwiY29tcHV0ZWQiLCJicG1uRWRpdG9yU3RvcmVBcGkiLCJjb21tYW5kc1JlZiIsImJwbW5Nb2RlbEJlZm9yZUVkaXRpbmdSZWYiLCJicG1uRWRpdG9yUm9vdEVsZW1lbnRSZWYiLCJkaWFncmFtUmVmIiwiZGlhZ3JhbUNvbnRhaW5lclJlZiIsInJlc2V0Iiwic3RhdGUiLCJnZXRTdGF0ZSIsImRpc3BhdGNoIiwiZ2V0RGlhZ3JhbVN2ZyIsIm5vZGVzIiwiX2IiLCJfYSIsImN1cnJlbnQiLCJnZXRSZWFjdEZsb3dJbnN0YW5jZSIsImdldE5vZGVzIiwiZWRnZXMiLCJfZCIsIl9jIiwiZ2V0RWRnZXMiLCJ1bmRlZmluZWQiLCJib3VuZHMiLCJnZXROb2Rlc0JvdW5kcyIsInN2ZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwid2lkdGgiLCJoZWlnaHQiLCJyZW5kZXIiLCJfanN4IiwidHJhbnNmb3JtIiwieCIsInkiLCJjaGlsZHJlbiIsInNuYXBHcmlkIiwieHlGbG93UmVhY3RLaWVEaWFncmFtIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwiZ2V0Q29tbWFuZHMiLCJzZXRTdGF0ZSIsInByZXYiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImNvbnNvbGUiLCJkZWJ1ZyIsImNsZWFyVGltZW91dCIsInJlZiIsImNsYXNzTmFtZSIsImlzRXhwYW5kZWQiLCJpc0lubGluZSIsInBvc2l0aW9uIiwicGFuZWxDb250ZW50IiwiX2pzeHMiLCJ2ZXJzaW9uIiwiY29udGFpbmVyIiwiQnBtbkVkaXRvciIsInByb3BzIiwic3RvcmUiLCJzdG9yZVJlZiIsInJlc2V0U3RhdGUiLCJfcmVmMiIsImFyZ3MiLCJkaWFncmFtIiwiRmFsbGJhY2tDb21wb25lbnQiLCJvblJlc2V0IiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RvcmVXaXRoRXF1YWxpdHlGbiIsInNlbGVjdG9yIiwiZXF1YWxpdHlGbiIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==